---
title: From Style Dictionary
description: Migrate from Style Dictionary to Dispersa — concept mapping, config translation, and step-by-step guide.
sidebar:
  order: 1
---

import { Aside, LinkCard } from '@astrojs/starlight/components'
import ComparisonViewer from '../../../components/ComparisonViewer'

## Concept Mapping

| Style Dictionary | Dispersa | Notes |
| --- | --- | --- |
| Token format | DTCG format | SD uses `value`, Dispersa uses `$value` |
| config.json source globs | Resolver document | Resolver uses sets with explicit $ref |
| Platform | Output (OutputConfig) | Each output has its own renderer |
| TransformGroup | Transform[] array | Factory functions, not global registration |
| Transform (registered) | Transform object | Inline object with matcher and transform |
| Format | Renderer | Built-in css(), json(), js(), or custom defineRenderer |
| buildPath per platform | buildPath global + file per output | |
| `{'{'}color.primary.value{'}'}` | `{'{'}color.primary{'}'}` | No .value suffix in DTCG |
| No theming | Modifiers | DTCG resolver handles themes natively |

## Token Format Migration

Style Dictionary uses a non-standard token format with `value` (no dollar prefix), `type`, and `attributes`. Dispersa expects the DTCG standard format.

**Before (Style Dictionary):**

```json
{
  "color": {
    "primary": {
      "value": "#0066cc",
      "type": "color"
    }
  }
}
```

**After (Dispersa / DTCG):**

```json
{
  "color": {
    "primary": {
      "$type": "color",
      "$value": { "colorSpace": "srgb", "components": [0, 0.4, 0.8] }
    }
  }
}
```

<Aside type="note" title="Preprocessor option">
You can use a preprocessor to normalize Style Dictionary tokens to DTCG format during migration.
</Aside>

## Config Migration

<ComparisonViewer
  client:visible
  before={{
    label: 'Style Dictionary',
    language: 'json',
    code: `{
  "source": ["tokens/**/*.json"],
  "platforms": {
    "css": {
      "transformGroup": "css",
      "buildPath": "dist/",
      "files": [{
        "destination": "tokens.css",
        "format": "css/variables"
      }]
    }
  }
}`,
  }}
  after={{
    label: 'Dispersa',
    language: 'typescript',
    code: `import { Dispersa, css } from 'dispersa'
import { colorToHex, nameKebabCase } from 'dispersa/transforms'

const dispersa = new Dispersa({
  resolver: './tokens.resolver.json',
  buildPath: './dist',
})

await dispersa.build({
  outputs: [
    css({
      name: 'css',
      file: 'tokens.css',
      preset: 'bundle',
      transforms: [nameKebabCase(), colorToHex()],
    }),
  ],
})`,
  }}
/>

## Step-by-Step Migration Guide

1. **Convert token format** — Add `$` prefix to properties, convert values to DTCG objects (colors to colorSpace + components, dimensions to value + unit)
2. **Create a resolver document** — Replace `source` globs with a resolver that uses sets and explicit `$ref` to token files
3. **Replace config** — Switch to a Dispersa build script or CLI config (`dispersa.config.ts`) instead of `config.json`
4. **Map transforms** — Replace Style Dictionary transforms with Dispersa transform factories (see table below)
5. **Map formats to renderers** — Use built-in `css()`, `json()`, `js()` or custom `defineRenderer` instead of registered formats
6. **Set up theming if needed** — Use modifiers in the resolver for light/dark themes and variants
7. **Test output** — Compare generated files to ensure output matches expected structure

## Transform Mapping

| SD Transform | Dispersa Transform |
| color/hex | colorToHex() |
| color/rgb | colorToRgb() |
| color/hsl | colorToHsl() |
| name/cti/camel | nameCamelCase() |
| name/cti/kebab | nameKebabCase() |
| size/px | dimensionToPx() |
| size/rem | dimensionToRem() |

## Key Advantages of Migrating

- **DTCG compliance** — Tokens follow the official specification for interoperability
- **Resolver-based theming** — Native light/dark and multi-dimensional themes via modifiers
- **Type-safe config** — TypeScript config with `defineConfig` and full IntelliSense
- **In-memory mode** — Build without writing files for programmatic use

<LinkCard
  title="From Terrazzo"
  description="Migrate from Terrazzo — a smoother transition since both are DTCG-native."
  href="/migration/from-terrazzo/"
/>
